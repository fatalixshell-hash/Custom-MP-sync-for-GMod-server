# Custom-MP-sync-for-GMod-server
# Photon Realtime для Garry's Mod

## Описание
Photon Realtime — это аддон для Garry's Mod, позволяющий синхронизировать позиции и здоровье игроков между несколькими клиентами через HTTP-релей. Предназначен для пиратских версий GMod, где официальные серверы недоступны. Позволяет имитировать мультиплеер в одиночной игре или локальной сети.

## Требования
- Garry's Mod (пиратская версия)
- Node.js (для запуска релея)
- npm (для установки зависимостей)

## Установка
1. Скопируйте папку `photon_realtime` в `garrysmod/addons/`.
2. Перезапустите GMod или перемонтируйте аддоны.

## Использование
### Создание релея
1. В консоли GMod введите: `photon_create_relay`
2. Это создаст файлы в `garrysmod/data/photon_relay/`:
   - `server.js` — скрипт сервера
   - `start_relay.bat` — батник для запуска
   НЕРАБОТАЕТ РЕЛЕЙ ЗИП АРХИВ РЯДОМ

### Запуск релея
1. Запустите `start_relay.bat` (он установит зависимости и запустит сервер на порту 8080).
2. Сервер будет слушать HTTP запросы на `/update` (POST) и `/state` (GET).

### Настройка клиентов
1. Откройте Spawn Menu > Options > Photon > Photon Sync.
2. Установите:
   - Relay IP: IP адрес машины с релеем (127.0.0.1 для локального)
   - Relay Port: 8080 (или другой, если изменили)
   - Nick: Ваш ник
3. Нажмите "Применить".

### Подключение
- Клиенты автоматически начнут отправлять данные на релей каждые 0.1 сек.
- Получать данные других игроков каждые 0.2 сек.
- В консоли выводятся ники и позиции других игроков.

## Как это работает
- Каждый клиент отправляет JSON с ID, ником, позицией и здоровьем на релей.
- Релей хранит данные игроков и удаляет неактивных через 3 сек.
- Клиенты запрашивают состояние всех игроков и отображают их (например, в консоли).

## Ограничения
- Не полноценный сервер GMod; не появляется в браузере серверов.
- Только синхронизация данных; нет чата, голоса или других функций.
- Работает только с аддоном на всех клиентах.

## Команды
- `photon_create_relay` — создать файлы релея
- `photon_apply` — применить настройки из меню

## Примечания
- Для нескольких игроков: один запускает релей, остальные подключаются к его IP.
- Если порт занят, измените в `server.js` и настройках клиентов.
